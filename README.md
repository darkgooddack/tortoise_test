# tortoise_test
–≠—Ç–æ—Ç —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π ‚Äî –Ω–µ–±–æ–ª—å—à–∞—è –ø–µ—Å–æ—á–Ω–∏—Ü–∞ –¥–ª—è –∏–∑—É—á–µ–Ω–∏—è —Ä–∞–±–æ—Ç—ã —Å Tortoise ORM –∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–º –º–∏–≥—Ä–∞—Ü–∏–π Aerich –≤ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã—Ö Python-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è—Ö.

### –¶–µ–ª–∏ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è:
- –†–∞–∑–æ–±—Ä–∞—Ç—å—Å—è, –∫–∞–∫ –ø–æ–¥–∫–ª—é—á–∞—Ç—å Tortoise ORM –∏ –æ–ø–∏—Å—ã–≤–∞—Ç—å –º–æ–¥–µ–ª–∏
- –ù–∞—É—á–∏—Ç—å—Å—è —Ä–∞–±–æ—Ç–∞—Ç—å —Å Aerich: –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è, –º–∏–≥—Ä–∞—Ü–∏–∏, –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å—Ö–µ–º—ã
- –ü–æ–∫–∞–∑–∞—Ç—å –ø—Ä–æ—Å—Ç—ã–µ CRUD-–æ–ø–µ—Ä–∞—Ü–∏–∏ –Ω–∞ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–º Python
- –î–∞—Ç—å —è—Å–Ω—ã–µ –ø–æ—à–∞–≥–æ–≤—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –¥–ª—è –Ω–∞—á–∏–Ω–∞—é—â–∏—Ö

### –ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏:
- Python 3.11+
- Tortoise ORM
- Aerich
- Poetry
- PostgreSQL
- pgAdmin

### üöÄ –ü–µ—Ä–≤—ã–µ —à–∞–≥–∏

1. –°–æ–∑–¥–∞–Ω–∏–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è –∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
```
python3 -m venv .venv
source .venv/bin/activate  
.venv\Scripts\activate # Windows
```

*–£ –º–µ–Ω—è –≤—Å–µ–≥–¥–∞ –∫–∞–∫–∏–µ-—Ç–æ —Ñ–æ–∫—É—Å—ã —Å –æ–∫—Ä—É–∂–µ–Ω–∏–µ–º, –ø–æ—ç—Ç–æ–º—É –ø–æ—Ç–æ–º –≤ Python Interpreter —É–∫–∞–∑—ã–≤–∞—é –ø—É—Ç—å –∫ .venv*

2. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π —á–µ—Ä–µ–∑ Poetry
```
pip install poetry
```
3. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞:
```
poetry init
```
4. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö –ø–∞–∫–µ—Ç–æ–≤:
```
poetry add fastapi "tortoise-orm[asyncpg]" aerich
```
*[asyncpg] ‚Äî —ç—Ç–æ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π –ø–∞–∫–µ—Ç –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ PostgreSQL.*

5. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ dev-–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π (–ø–æ –∂–µ–ª–∞–Ω–∏—é):
```
poetry add --group dev uvicorn
```

*–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è: 
–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ PyCharm –≤ –ª–µ–≤–æ–π –≤–∫–ª–∞–¥–∫–µ Commit 
–≤–æ View Options –≤—Å–µ–≥–¥–∞ —Å—Ç–∞–≤—å—Ç–µ Group By Directory,
–≤ .gitignore —Ä–∞—Å–∫–æ–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ .idea/ –Ω–∞ GitHub 
—ç—Ç–∞ –ø–∞–ø–∫–∞ –Ω–µ –¥–æ–ª–∂–Ω–∞ —É—Ö–æ–¥–∏—Ç—å*


### üßÉ –ü–∏—à–µ–º CRUD –¥–ª—è –ª–∞–≤–∫–∏ —Å —Å–æ–∫–æ–º

##### 1. –û–ø–∏—Å—ã–≤–∞–µ–º –º–æ–¥–µ–ª—å

–ü–∞–ø–∫–∞ app –≤ –Ω–µ–π models –∏ –≤ —Ñ–∞–π–ª–∞—Ö –ø–æ –ª–æ–≥–∏–∫–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—è–µ–º –∫–ª–∞—Å—Å—ã –¥–ª—è –º–æ–¥–µ–ª–µ–∫.
–û–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å –∏ related_name –∫–∞–∫ –≤ Django.

##### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Tortoise
–ü–æ–∫–∞ —á—Ç–æ –≤—Å—ë –≤ —Ñ–∞–π–ª–µ main.py, 
–∫–∞–∫ —Å —ç—Ç–∏–º —Ä–∞–±–æ—Ç–∞—Ç—å, –ø–æ–∫–∞ –Ω–µ —è—Å–Ω–æ.

##### 3. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Tortoise
```
poetry run aerich init -t app.main.TORTOISE_ORM
```
–ü–æ—è–≤–∏–ª–∞—Å—å –ø–∞–ø–∫–∞ migrations
```
poetry run aerich init-db
```
–í –ø–∞–ø–∫–µ migrations —Å–æ–∑–¥–∞–ª–∞—Å—å –ø–∞–ø–∫–∞ models —Å –ø–µ—Ä–≤–æ–π –º–∏–≥—Ä–∞—Ü–∏–µ–π

##### 4. –ö–æ–º–∞–Ω–¥—ã —Å Aerich
–°–æ–∑–¥–∞–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–π –Ω–∞ –æ—Å–Ω–æ–≤–µ –º–æ–¥–µ–ª–µ–π:
```
poetry run aerich migrate
```
–ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏ –∫ –ë–î:
```
poetry run aerich upgrade
```

##### 5. –ó–∞–ø—É—Å–∫ FastAPI
```
poetry run uvicorn app.main:app --reload
```
–ü–µ—Ä–µ—Ö–æ–¥–∏–º –≤ /docs –∏ —Ç–µ—Å—Ç–∏—Ä—É–µ–º CRUD –Ω–∞–¥ —Å–æ–∫–∞–º–∏.

*–î–ª—è —Ä–∞–±–æ—Ç—ã —Å —Å–æ–∫–∞–º–∏ –Ω–∞–¥–æ —Å–æ–∑–¥–∞—Ç—å 
—Ö–æ—Ç—è –±—ã –æ–¥–Ω–æ–≥–æ –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞ –¥–ª—è FK*